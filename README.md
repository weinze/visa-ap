Connection sample to VISA Sandbox using two-way SSL with Spring Boot

The first step is to create a project in the VISA sandbox environment (https://developer.visa.com/) and using the `Mutual Authentication`.

Once the project is created, you will be provided with a private key, certificate, and authorization credentials. 
You will also need to download the common root certificate and the digicert.

### Keystore configuration

The first step is generate a keystore with the private key and certificate generated by our project.

```
openssl pkcs12 -export -in {certificate}.pem -inkey "{privateKey}.pem" -certfile {certificate}.pem -out keystore.p12
```

Generate a Java keystore (JSK) with our previous P12 file created

```
keytool -importkeystore -srckeystore {keystore}.p12 -srcstoretype PKCS12 -destkeystore keystore.jks -deststoretype PKCS12
```

Add the  root certificate and the digicert download previuosly into our JKS file

```
keytool -import -alias rootcert -keystore {keystore}.jks -file VDPCA-SBX.pem -storepass {password}
keytool -import -alias digicert -keystore {keystore}.jks -file DigiCertGlobalRootCA.crt -storepass {password}
```

This will allow you to establish a successful connection with the server.

### App configuration

- Copy our JSK file into resource folder.


- Set up the environment variables:

You can modify the `application.yml` file (Or create `application-dev.yml`) with your own credentials:

```
visa:
  keystore:
    file: keystore.jks
    password: myKeystorePassword
  project:
    userId: myProjectUserId
    password: myProjectPassword
```

### Run application

Now that everything is configured you can run the application:

```
./mvnw spring-boot:run
```

The application should be running in `http://127.0.0.1:8080/visa/helloworld` 

---

### Implementation improvements

- `RestTemplate` bean

The way it is done, Visa project credentials are sent in all the requests of the `RestTemplate`. 
If it is necessary to use different credentials with the same `restTemplate`, the credentials configuration should be moved to `VisaClient` instead:

```
restTemplate.getInterceptors().add(new BasicAuthenticationInterceptor("username", "password"));
restTemplate.get....
```

Since `restTemplate` is instantiated at application startup, it is difficult to test for invalid credentials/certificates.
With the credentials change mentioned above, it might be easier to test how the app reacts to a failed authentication.

- API

Set up Swagger to view the API provided by the application